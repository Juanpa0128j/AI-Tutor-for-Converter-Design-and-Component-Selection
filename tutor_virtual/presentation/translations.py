TRANSLATIONS = {
    "en": {
        "app_title": "AI Power Converter Designer",
        "main_header": "# âš¡ AI Tutor: Power Converter Designer",
        "tab_designer": "Designer",
        "designer_intro": "Select a topology, enter parameters, and get a pre-design with recommended components.",
        "config_header": "### 1. Configuration",
        "topology_label": "Topology",
        "params_header": "### 2. Operating Parameters",
        "weights_header": "### 3. Component Prioritization",
        "weight_cost": "Cost",
        "weight_availability": "Availability",
        "weight_efficiency": "Efficiency",
        "weight_thermal": "Thermal",
        "calc_button": "ðŸš€ Calculate Design",
        "report_header": "### ðŸ“Š Design Report",
        "report_placeholder": "Select a topology and press Calculate to see results.",
        "catalog_header": "### ðŸ”Œ Component Catalog",
        "tab_tutor": "Virtual Tutor",
        "tutor_header": "### ðŸŽ“ Expert Power Electronics Assistant",
        "tutor_intro": "Ask about concepts, topologies, or request step-by-step explanations.",
        "chat_title": "Chat with Tutor",
        "col_type": "Type",
        "col_mfr": "Manufacturer",
        "col_part": "Part Number",
        "col_desc": "Description",
        "col_price": "Price (USD)",
        "col_stock": "Stock",
        "col_score": "Score",
        "col_datasheet": "Datasheet",
        "col_link": "Link",
        "ex_buck": "What is a Buck converter?",
        "ex_inductor": "Explain step-by-step how to select the inductor.",
        "ex_diff": "What is the difference between Buck and Boost?",
        "ex_freq": "Why is switching frequency important?",
        "msg_select_topo": "âš ï¸ Please select a topology.",
        "msg_invalid_topo": "âš ï¸ Invalid topology.",
        "msg_service_unavailable": "âš ï¸ Virtual Tutor service unavailable (check API Key).",
        "msg_tutor_context_updated": "Tutor context updated with new design!",
        # Documents tab
        "tab_documents": "Documents",
        "docs_header": "### ðŸ“š Course Documents",
        "docs_intro": "Upload course materials (PDF, DOCX, TXT, etc.) to enable the AI tutor to reference them.",
        "docs_upload_label": "Upload Document",
        "docs_list_header": "### Indexed Documents",
        "docs_status_processing": "ðŸ”„ Processing...",
        "docs_status_success": "âœ… Successfully indexed!",
        "docs_status_error": "âŒ Error processing file",
        "docs_no_documents": "No documents uploaded yet.",
        "docs_delete_btn": "ðŸ—‘ï¸ Delete",
        "docs_refresh_btn": "ðŸ”„ Refresh",
        "docs_col_id": "ID",
        "docs_col_filename": "Filename",
        "docs_col_chunks": "Chunks",
        "docs_col_indexed": "Indexed At",
        "docs_upload_started": "ðŸš€ Started {count} background indexing jobs ({strategy}). You can continue working.",
        "docs_delete_label": "Select Document to Delete",
        "docs_delete_btn": "Delete",
        "docs_delete_success": "âœ… Document {doc_id} deleted successfully.",
        "docs_delete_error": "âŒ Failed to delete document {doc_id}.",
        "docs_select_none": "âš ï¸ No document selected.",
        "docs_job_completed": "âœ… Indexing completed for: {filename}",
        "docs_job_failed": "âŒ Indexing failed: {error}",
        "report_title": "Design Result",
        "report_params": "Primary Parameters",
        "report_losses": "Estimated Losses",
        "report_total_losses": "Total Losses",
        "report_warnings": "Warnings",
        "report_error_validation": "Validation Error",
        "report_error_system": "System Error",
        "comp_service_unavailable": "Component service unavailable",
        "comp_no_requirements": "No component requirements detected",
        "link_view": "View",
        # Schema Translations
        "topo_buck_title": "Buck (Step-Down)",
        "topo_buck_desc": "DC-DC Step-Down Converter in CCM",
        "topo_boost_title": "Boost (Step-Up)",
        "topo_boost_desc": "DC-DC Step-Up Converter in CCM",
        "topo_buck_boost_title": "Buck-Boost (Inverting)",
        "topo_buck_boost_desc": "Step-Up/Step-Down Converter with negative output",
        "topo_cuk_title": "Ä†uk",
        "topo_cuk_desc": "Ä†uk Converter in Continuous Mode",
        "topo_flyback_title": "Flyback",
        "topo_flyback_desc": "Isolated Flyback Converter",
        "topo_rect_single_title": "Single-Phase Half-Wave Rectifier",
        "topo_rect_single_desc": "Basic AC-DC Rectifier",
        "topo_rect_full_title": "Single-Phase Full-Bridge Rectifier",
        "topo_rect_full_desc": "Full-Wave Rectifier",
        "topo_triac_title": "TRIAC Phase Control",
        "topo_triac_desc": "Single-Phase Regulator with TRIAC",
        "topo_inv_half_title": "Half-Bridge Inverter",
        "topo_inv_half_desc": "Single-Phase DC-AC Inverter",
        "topo_inv_full_single_title": "Single-Phase Full-Bridge Inverter",
        "topo_inv_full_single_desc": "Classic SPWM Inverter",
        "topo_inv_full_three_title": "Three-Phase Inverter",
        "topo_inv_full_three_desc": "Three-Phase Full-Bridge",
        "topo_pwm_title": "PWM Modulation",
        "topo_pwm_desc": "SPWM/SVPWM Modulation Parameters",
        "lbl_vin": "Vin",
        "lbl_vo_target": "Target Vout",
        "lbl_vo_target_neg": "Target Vout (negative)",
        "lbl_vo_target_any": "Vout (can be negative)",
        "lbl_fsw": "Switching Frequency",
        "lbl_io_max": "Output Current",
        "lbl_delta_il": "Allowed Ripple IL",
        "lbl_delta_vo": "Allowed Ripple Vo",
        "lbl_ripple_vo": "Max Ripple Vo",
        "lbl_ripple_voltage": "Max Voltage Ripple",
        "lbl_vin_min": "Min Vin",
        "lbl_vin_max": "Max Vin",
        "lbl_pout": "Output Power",
        "lbl_duty_max": "Max Duty Cycle",
        "lbl_turns_ratio": "Turns Ratio Np/Ns",
        "lbl_vac_rms": "Vac RMS",
        "lbl_freq_ac": "Grid Frequency",
        "lbl_load_resistance": "Load R",
        "lbl_alpha_deg": "Firing Angle",
        "lbl_vdc": "Vdc",
        "lbl_vo_rms": "Vo RMS",
        "lbl_fo": "Fundamental Frequency",
        "lbl_thd_target": "Target THD",
        "lbl_vll_rms": "VLL RMS",
        "lbl_carrier_freq": "Carrier Frequency",
        "lbl_fund_freq": "Fundamental Frequency",
        "lbl_mod_index": "Modulation Index",
        "lbl_delta_il1": "Allowed Ripple IL1",
        "lbl_delta_il2": "Allowed Ripple IL2",
    },
    "es": {
        "app_title": "DiseÃ±ador de Convertidores de Potencia IA",
        "main_header": "# âš¡ AI Tutor: DiseÃ±ador de Convertidores de Potencia",
        "tab_designer": "DiseÃ±ador",
        "designer_intro": "Seleccione una topologÃ­a, ingrese los parÃ¡metros y obtenga un prediseÃ±o con componentes recomendados.",
        "config_header": "### 1. ConfiguraciÃ³n",
        "topology_label": "TopologÃ­a",
        "params_header": "### 2. ParÃ¡metros Operativos",
        "weights_header": "### 3. PriorizaciÃ³n de Componentes",
        "weight_cost": "Costo",
        "weight_availability": "Disponibilidad",
        "weight_efficiency": "Eficiencia",
        "weight_thermal": "TÃ©rmica",
        "calc_button": "ðŸš€ Calcular DiseÃ±o",
        "report_header": "### ðŸ“Š Reporte de DiseÃ±o",
        "report_placeholder": "Seleccione una topologÃ­a y presione Calcular para ver los resultados.",
        "catalog_header": "### ðŸ”Œ CatÃ¡logo de Componentes",
        "tab_tutor": "Tutor Virtual",
        "tutor_header": "### ðŸŽ“ Asistente Experto en ElectrÃ³nica de Potencia",
        "tutor_intro": "Pregunte sobre conceptos, topologÃ­as o pida explicaciones paso a paso.",
        "chat_title": "Chat con el Tutor",
        "col_type": "Tipo",
        "col_mfr": "Fabricante",
        "col_part": "NÃºmero de Parte",
        "col_desc": "DescripciÃ³n",
        "col_price": "Precio (USD)",
        "col_stock": "Stock",
        "col_score": "Score",
        "col_datasheet": "Datasheet",
        "col_link": "Link",
        "ex_buck": "Â¿QuÃ© es un convertidor Buck?",
        "ex_inductor": "ExplÃ­came paso a paso cÃ³mo seleccionar el inductor.",
        "ex_diff": "Â¿CuÃ¡l es la diferencia entre Buck y Boost?",
        "ex_freq": "Â¿Por quÃ© es importante la frecuencia de conmutaciÃ³n?",
        "msg_select_topo": "âš ï¸ Por favor seleccione una topologÃ­a.",
        "msg_invalid_topo": "âš ï¸ TopologÃ­a invÃ¡lida.",
        "msg_service_unavailable": "âš ï¸ El servicio de Tutor Virtual no estÃ¡ disponible (revise API Key).",
        "msg_tutor_context_updated": "Â¡Contexto del tutor actualizado con el nuevo diseÃ±o!",
        # Documents tab
        "tab_documents": "Documentos",
        "docs_header": "### ðŸ“š Documentos del Curso",
        "docs_intro": "Sube materiales del curso (PDF, DOCX, TXT, etc.) para que el tutor IA pueda referenciarlos.",
        "docs_upload_label": "Subir Documento",
        "docs_list_header": "### Documentos Indexados",
        "docs_status_processing": "ðŸ”„ Procesando...",
        "docs_status_success": "âœ… Â¡Indexado exitosamente!",
        "docs_status_error": "âŒ Error procesando archivo",
        "docs_no_documents": "AÃºn no hay documentos subidos.",
        "docs_delete_btn": "ðŸ—‘ï¸ Eliminar",
        "docs_refresh_btn": "ðŸ”„ Actualizar",
        "docs_col_id": "ID",
        "docs_col_filename": "Nombre",
        "docs_col_chunks": "Fragmentos",
        "docs_col_indexed": "Indexado",
        "docs_upload_started": "ðŸš€ Se iniciaron {count} trabajos de indexaciÃ³n en segundo plano ({strategy}). Puedes continuar trabajando.",
        "docs_delete_label": "Seleccionar Documento a Borrar",
        "docs_delete_btn": "Borrar",
        "docs_delete_success": "âœ… Documento {doc_id} eliminado exitosamente.",
        "docs_delete_error": "âŒ Error al eliminar documento {doc_id}.",
        "docs_select_none": "âš ï¸ NingÃºn documento seleccionado.",
        "docs_job_completed": "âœ… IndexaciÃ³n completada para: {filename}",
        "docs_job_failed": "âŒ FallÃ³ la indexaciÃ³n: {error}",
        "report_title": "Resultado del PrediseÃ±o",
        "report_params": "ParÃ¡metros Principales",
        "report_losses": "PÃ©rdidas Estimadas",
        "report_total_losses": "PÃ©rdidas Totales",
        "report_warnings": "Advertencias",
        "report_error_validation": "Error de ValidaciÃ³n",
        "report_error_system": "Error del Sistema",
        "comp_service_unavailable": "Servicio de componentes no disponible",
        "comp_no_requirements": "No se detectaron componentes necesarios",
        "link_view": "Ver",
        # Schema Translations
        "topo_buck_title": "Buck (Reductor)",
        "topo_buck_desc": "Convertidor DC-DC reductor en modo CCM",
        "topo_boost_title": "Boost (Elevador)",
        "topo_boost_desc": "Convertidor DC-DC elevador en CCM",
        "topo_buck_boost_title": "Buck-Boost (Polaridad invertida)",
        "topo_buck_boost_desc": "Convertidor reductor-elevador con salida negativa",
        "topo_cuk_title": "Ä†uk",
        "topo_cuk_desc": "Convertidor Ä†uk en modo continuo",
        "topo_flyback_title": "Flyback",
        "topo_flyback_desc": "Convertidor Flyback aislado",
        "topo_rect_single_title": "Rectificador monofÃ¡sico media onda",
        "topo_rect_single_desc": "Rectificador AC-DC bÃ¡sico",
        "topo_rect_full_title": "Rectificador puente monofÃ¡sico",
        "topo_rect_full_desc": "Rectificador de onda completa",
        "topo_triac_title": "Control de fase TRIAC",
        "topo_triac_desc": "Regulador monofÃ¡sico con TRIAC",
        "topo_inv_half_title": "Inversor medio puente",
        "topo_inv_half_desc": "Inversor DC-AC monofÃ¡sico",
        "topo_inv_full_single_title": "Inversor puente completo monofÃ¡sico",
        "topo_inv_full_single_desc": "Inversor SPWM clÃ¡sico",
        "topo_inv_full_three_title": "Inversor trifÃ¡sico",
        "topo_inv_full_three_desc": "Puente completo trifÃ¡sico",
        "topo_pwm_title": "ModulaciÃ³n PWM",
        "topo_pwm_desc": "ParÃ¡metros de modulaciones SPWM/SVPWM",
        "lbl_vin": "Vin",
        "lbl_vo_target": "Vout deseada",
        "lbl_vo_target_neg": "Vout deseada (negativa)",
        "lbl_vo_target_any": "Vout (puede ser negativa)",
        "lbl_fsw": "Frecuencia de conmutaciÃ³n",
        "lbl_io_max": "Corriente de salida",
        "lbl_delta_il": "Rizo permitido IL",
        "lbl_delta_vo": "Rizo permitido Vo",
        "lbl_ripple_vo": "Rizo mÃ¡ximo Vo",
        "lbl_ripple_voltage": "Rizo mÃ¡ximo en voltaje",
        "lbl_vin_min": "Vin mÃ­nima",
        "lbl_vin_max": "Vin mÃ¡xima",
        "lbl_pout": "Potencia de salida",
        "lbl_duty_max": "Duty mÃ¡ximo permitido",
        "lbl_turns_ratio": "RelaciÃ³n Np/Ns",
        "lbl_vac_rms": "Vac RMS",
        "lbl_freq_ac": "Frecuencia red",
        "lbl_load_resistance": "Carga R",
        "lbl_alpha_deg": "Ãngulo de disparo",
        "lbl_vdc": "Vdc",
        "lbl_vo_rms": "Vo RMS",
        "lbl_fo": "Frecuencia fundamental",
        "lbl_thd_target": "THD objetivo",
        "lbl_vll_rms": "VLL RMS",
        "lbl_carrier_freq": "Frecuencia portadora",
        "lbl_fund_freq": "Frecuencia fundamental",
        "lbl_mod_index": "Ãndice de modulaciÃ³n",
        "lbl_delta_il1": "Rizo permitido IL1",
        "lbl_delta_il2": "Rizo permitido IL2",
    }
}

LANG_MAP = {
    "English": "en",
    "EspaÃ±ol": "es"
}

def get_text(key: str, lang_label: str = "EspaÃ±ol") -> str:
    """Get translated text for a key and language label."""
    lang_code = LANG_MAP.get(lang_label, "es")
    return TRANSLATIONS.get(lang_code, {}).get(key, key)
